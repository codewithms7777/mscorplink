<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Link Shortener â€” Single File</title>
<style>
  :root{--bg:#f5f7ff;--card:#fff;--accent:#4A7CFF;--muted:#667;--ok:#1aab4b;--err:#e04b4b}
  html,body{height:100%;margin:0;font-family:Inter,system-ui,Segoe UI,Roboto,Arial;background:linear-gradient(180deg,#eef3ff,#fff);display:flex;align-items:center;justify-content:center;padding:24px}
  .card{width:420px;background:var(--card);padding:20px;border-radius:12px;box-shadow:0 8px 30px rgba(40,50,80,0.08)}
  h1{margin:0 0 12px;font-size:18px}
  .row{display:flex;gap:8px}
  input{flex:1;padding:10px;border-radius:8px;border:1px solid #d2d7f0;font-size:14px}
  button{padding:10px 12px;border-radius:8px;border:none;background:var(--accent);color:#fff;cursor:pointer}
  #result{margin-top:12px;padding:10px;border-radius:8px;background:#f3f7ff;font-size:14px;word-break:break-all}
  .muted{color:var(--muted);font-size:13px;margin-top:8px}
  .tiny{font-size:12px;color:var(--muted);margin-left:8px}
  .flex{display:flex;align-items:center;gap:8px}
  .status{font-weight:600}
  .copyBtn{background:#fff;border:1px solid #d2d7f0;padding:6px 8px;border-radius:6px;cursor:pointer}
  .error{color:var(--err)}
  .ok{color:var(--ok)}
</style>
</head>
<body>
  <div class="card" role="main">
    <h1>ðŸ”— Link Shortener</h1>

    <div class="row">
      <input id="inputURL" placeholder="Paste a long URL (e.g. example.com or https://site.com)" aria-label="URL input">
      <button id="shortenBtn">Shorten</button>
    </div>

    <div id="result" hidden></div>
    <div class="muted">No backend â€” using <strong>is.gd</strong> API. Works offline in your browser if opened over HTTP(S).</div>
  </div>

<script>
const shortenBtn = document.getElementById('shortenBtn');
const input = document.getElementById('inputURL');
const result = document.getElementById('result');

// Your Render backend URL
const API = "https://mscorplink.onrender.com/shorten";

async function shorten(){
  const raw = input.value.trim();
  if(!raw){
    result.hidden = false;
    result.innerHTML = "Please paste a URL.";
    return;
  }

  // Always add https:// if missing
  let fixed = raw;
  if(!fixed.startsWith("http")) fixed = "https://" + fixed;

  result.hidden = false;
  result.innerHTML = "Generatingâ€¦";

  const res = await fetch(API, {
    method: "POST",
    headers: { "Content-Type": "application/json" },
    body: JSON.stringify({ url: fixed })
  });

  const data = await res.json();

  if(data.error){
    result.innerHTML = data.error;
    return;
  }

  result.innerHTML = `
    <div class="flex">
      <div style="flex:1">
        <div class="status">Short URL</div>
        <a id="shortLink" href="${data.short}" target="_blank">${data.short}</a>
        <div class="tiny">Original: ${fixed}</div>
      </div>
      <button id="copyBtn" class="copyBtn">Copy</button>
    </div>
  `;

  document.getElementById('copyBtn').onclick = async () => {
    await navigator.clipboard.writeText(data.short);
    result.innerHTML = "Copied! âœ”";
  };
}

shortenBtn.addEventListener("click", shorten);
input.addEventListener("keydown", e => { if(e.key === "Enter") shorten(); });
</script>

</body>
</html>
